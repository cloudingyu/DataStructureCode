# 子串差距和

## 题目描述

给定一个长度为 $n$ 的数组 $a_1, a_2, ..., a_n$。定义函数 $f(i, j) = \max(a_i, a_{i+1}, ... a_j) - \min(a_i, a_{i+1}, ... a_j)$。求 $\sum_{l=1}^{n} \sum_{r=l}^{n} f(l, r)$。

## 输入格式

- 第一行一个整数 $n$。
- 第二行 $n$ 个整数，第 $i$ 个整数表示 $a_i$。

## 输出格式

一个整数，表示 $\sum_{l=1}^{n} \sum_{r=l}^{n} f(l, r)$ 的答案。

## 样例 #1

### 样例输入 #1

```
10
7 6 6 5 6 5 1 9 2 10
```

### 样例输出 #1

```
245
```

## 数据范围与提示

$1 \le n \le 3 \times 10^6$, $1 \le a_i \le 10^9$。

本题可能需要更高精度的整数类型 `__int128` 存储答案。`__int128` 在 C++ 中无对应输出方式，需自行手写。以下提供一种示例：

```cpp
using i128 = __int128_t;
std::ostream& operator<<(std::ostream &os, i128 x) {
    std::string s;
    do {
        s.push_back(x % 10 + '0');
        x /= 10;
    } while (x);
    std::reverse(s.begin(), s.end());
    return os << s; 
}

void solve()
{
    i128 ans = 0;
    std::cout << ans << "\n";
}
```

